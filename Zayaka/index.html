<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script>
        function checkServerForLogin() {
            let userName = document.getElementById('userName')
            let password = document.getElementById('password')
            var data = {};
            data.username = userName.value;
            data.password = password.value;

            var xhr = new XMLHttpRequest();
            xhr.open("POST", '/login', true);
            xhr.setRequestHeader("Content-Type", "application/json");
            xhr.onreadystatechange = function () {
                if (this.readyState === XMLHttpRequest.DONE) {
                    if (this.status === 200) {
                        if (xhr.response) {
                            let serRes = JSON.parse(xhr.response);
                            if (serRes.error && serRes.error.length > 0) {
                                alert('login failed')
                            } else {
                                alert('Welcome ' + serRes.Username)
                                window.location.replace("/admin")
                            }
                        }
                    } else {
                        alert('login failed')
                    }
                }
            }
            xhr.send(JSON.stringify(data));
        }
    </script>
    <title>Login</title>
</head>

<body>
    <input type="text" name="username" id="userName"><br>
    <input type="password" name="password" id="password"><br>
    <button onclick="checkServerForLogin()">Login</button>
</body>

</html>